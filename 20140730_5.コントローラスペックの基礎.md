5.コントローラスペックの基礎
=========================================
コントローラのテストで難しいところはたくさんの要素に依存していること。  
たとえばモデル同士の関連の仕方やルーティングの設定によって依存関係の複雑さが変わってくる。

この章ではこうした難しさに対処する方法を対処していく。
========================================
###なぜコントローラをテストするのか？
####コントローラもメソッドを持ったクラスである
Raildアプリケーションにおいてコントローラは重要なクラスなので、スペック的にモデルと平等に扱うのが良い。

####コントローラスペックは統合テスト用のスペックで同じ事をやるのに比べて早くかけることが多い。
堅牢なコントローラスペックを書くのは比較的単純な作業のため。  
フィーチャスペックとは異なり、  
実行コストを上げずに目的のメソッドに特定の入力値を与えることができる。  

####コントローラスペックは通常、統合テスト用のスペックよりも素早く動作する
バグを直したり、操作系の確認をする際にとても助かる。  

###なぜRailsプロジェクトでコントローラをテストしないのか？
####コントローラは薄い
薄いのでテストしても意味がないと思っている  

####フィーチャスペックよりも速いとはいえ、コントローラスペックもモデルや普通の Ruby オブジェク
トのスペックよりは遅い
幾らかは軽減することが可能。詳細は第9章を参照すること  

####フィーチャスペックが一つあれば、複数のコントローラスペックを書いたことになる
複数のスペックを書いたりメンテナンスしたりする代わりに、  
一つのスペックでそうする方がシンプルになるかもしれない。


###コントローラテストの基礎
Scaffold は正しく利用すればそこからコーディングテクニックを学ぶことができるので非常に有益。  
RSpec 2.8 の時点ではコントローラ用に生成されたスペックファイルは非常に良くできていて、  
自分でスペックを書く際の良いテンプレートになる。  

例：保存が修了したらホームページにリダイレクトする

    #保存が完了したらホームページにリダイレクトすること
      it "redirects to the home page upon save" do
        post :create, contact: FactoryGirl.attributes_for(:contact)
        expect(response).to redirect_to root_url
      end

上記のコードを見るとこれまでに書いてきたスペックと似ていることがわかる。  
1:exampleの説明は明示的な能動系の言葉で書かれている。  
2:exampleで期待することは1個だけ。上記の場合ではpostリクエスト処理後にリダイレクトがブラウザにバックする  
3:ファクトリでコントローラのメソッドに渡すテストデータが作られている。  
  FactoryGirlを使用しているためオブジェクトではなく、値のハッシュが作られている。  
  外部ライブラリを使用せずに、普通のハッシュを渡すこともできるがこちらのほうが便利なため使用している。  

更にこれまで出てきていない新しい内容も2個出てきている  
1:コントローラスペックの基本構造-HTTPメソッド(post)、コントローラメソッド(:creaate)、メソッドに渡すパラメータ(任意)  
2

